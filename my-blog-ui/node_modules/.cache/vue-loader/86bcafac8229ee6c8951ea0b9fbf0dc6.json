{"remainingRequest":"E:\\code\\java\\idea\\myblog\\my-blog-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\code\\java\\idea\\myblog\\my-blog-ui\\src\\views\\service\\category\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\code\\java\\idea\\myblog\\my-blog-ui\\src\\views\\service\\category\\index.vue","mtime":1608965685995},{"path":"E:\\code\\java\\idea\\myblog\\my-blog-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\code\\java\\idea\\myblog\\my-blog-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"E:\\code\\java\\idea\\myblog\\my-blog-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\code\\java\\idea\\myblog\\my-blog-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgew0KICBsaXN0Q2F0ZWdvcnksDQogIGFkZENhdGVnb3J5LA0KICBnZXRDYXRlZ29yeSwNCiAgbGlzdENhdGVnb3J5RXhjbHVkZUNoaWxkLA0KICB1cGRhdGVDYXRlZ29yeSwNCiAgZGVsQ2F0ZWdvcnkNCn0gZnJvbSAnQC9hcGkvc2VyaXZjZS9jYXRlZ29yeScNCmltcG9ydCBUcmVlc2VsZWN0IGZyb20gJ0ByaW9waGFlL3Z1ZS10cmVlc2VsZWN0Jw0KaW1wb3J0ICdAcmlvcGhhZS92dWUtdHJlZXNlbGVjdC9kaXN0L3Z1ZS10cmVlc2VsZWN0LmNzcycNCg0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAiQ2F0ZWdvcnkiLA0KICBjb21wb25lbnRzOiB7IFRyZWVzZWxlY3QgfSwNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgLy8g6YGu572p5bGCDQogICAgICBsb2FkaW5nOiB0cnVlLA0KICAgICAgLy8g5pi+56S65pCc57Si5p2h5Lu2DQogICAgICBzaG93U2VhcmNoOiB0cnVlLA0KICAgICAgLy8g6KGo5qC85qCR5pWw5o2uDQogICAgICBjYXRlZ29yeUxpc3Q6IFtdLA0KICAgICAgLy8g57G755uu5qCR6YCJ6aG5DQogICAgICBjYXRlZ29yeU9wdGlvbnM6IFtdLA0KICAgICAgLy8g5by55Ye65bGC5qCH6aKYDQogICAgICB0aXRsZTogIiIsDQogICAgICAvLyDmmK/lkKbmmL7npLrlvLnlh7rlsYINCiAgICAgIG9wZW46IGZhbHNlLA0KICAgICAgLy8g54q25oCB5pWw5o2u5a2X5YW4DQogICAgICBzdGF0dXNPcHRpb25zOiBbXSwNCiAgICAgIC8vIOafpeivouWPguaVsA0KICAgICAgcXVlcnlQYXJhbXM6IHsNCiAgICAgICAgY2F0ZWdvcnlOYW1lOiB1bmRlZmluZWQsDQogICAgICAgIHN0YXR1czogdW5kZWZpbmVkDQogICAgICB9LA0KICAgICAgLy8g6KGo5Y2V5Y+C5pWwDQogICAgICBmb3JtOiB7DQogICAgICAgIGNhdGVnb3J5SWQ6IHVuZGVmaW5lZCwNCiAgICAgICAgcGFyZW50SWQ6IHVuZGVmaW5lZCwNCiAgICAgICAgY2F0ZWdvcnlOYW1lOiB1bmRlZmluZWQsDQogICAgICAgIG9yZGVyTnVtOiAnMCcsDQogICAgICAgIHN0YXR1czogJzAnDQogICAgICB9LA0KICAgICAgLy8g6KGo5Y2V5qCh6aqMDQogICAgICBydWxlczogew0KICAgICAgICBjYXRlZ29yeU5hbWU6IFsNCiAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAi57G755uu5ZCN56ew5LiN6IO95Li656m6IiwgdHJpZ2dlcjogImJsdXIiIH0NCiAgICAgICAgXSwNCiAgICAgICAgb3JkZXJOdW06IFsNCiAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAi6I+c5Y2V6aG65bqP5LiN6IO95Li656m6IiwgdHJpZ2dlcjogImJsdXIiIH0NCiAgICAgICAgXSwNCiAgICAgIH0NCiAgICB9DQogIH0sDQogIGNyZWF0ZWQoKSB7DQogICAgdGhpcy5nZXRMaXN0KCkNCiAgICB0aGlzLmdldERpY3RzKCJzeXNfbm9ybWFsX2Rpc2FibGUiKS50aGVuKHJlc3BvbnNlID0+IHsNCiAgICAgIHRoaXMuc3RhdHVzT3B0aW9ucyA9IHJlc3BvbnNlLmRhdGENCiAgICB9KTsNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIC8qKiDmn6Xor6Lpg6jpl6jliJfooaggKi8NCiAgICBnZXRMaXN0KCkgew0KICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTsNCiAgICAgIGxpc3RDYXRlZ29yeSh0aGlzLnF1ZXJ5UGFyYW1zKS50aGVuKHJlcyA9PiB7DQogICAgICAgIHRoaXMuY2F0ZWdvcnlMaXN0ID0gdGhpcy5oYW5kbGVUcmVlKHJlcy5kYXRhLCAiY2F0ZWdvcnlJZCIpDQogICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlDQogICAgICB9KTsNCiAgICB9LA0KICAgIC8qKiDovazmjaLpg6jpl6jmlbDmja7nu5PmnoQgKi8NCiAgICBub3JtYWxpemVyKG5vZGUpIHsNCiAgICAgIGlmIChub2RlLmNoaWxkcmVuICYmICFub2RlLmNoaWxkcmVuLmxlbmd0aCkgew0KICAgICAgICBkZWxldGUgbm9kZS5jaGlsZHJlbjsNCiAgICAgIH0NCiAgICAgIHJldHVybiB7DQogICAgICAgIGlkOiBub2RlLmNhdGVnb3J5SWQsDQogICAgICAgIGxhYmVsOiBub2RlLmNhdGVnb3J5TmFtZSwNCiAgICAgICAgY2hpbGRyZW46IG5vZGUuY2hpbGRyZW4NCiAgICAgIH07DQogICAgfSwNCiAgICAvLyDlrZflhbjnirbmgIHlrZflhbjnv7vor5ENCiAgICBzdGF0dXNGb3JtYXQocm93LCBjb2x1bW4pIHsNCiAgICAgIHJldHVybiB0aGlzLnNlbGVjdERpY3RMYWJlbCh0aGlzLnN0YXR1c09wdGlvbnMsIHJvdy5zdGF0dXMpOw0KICAgIH0sDQogICAgLy8g5Y+W5raI5oyJ6ZKuDQogICAgY2FuY2VsKCkgew0KICAgICAgdGhpcy5vcGVuID0gZmFsc2U7DQogICAgICB0aGlzLnJlc2V0KCk7DQogICAgfSwNCiAgICAvLyDooajljZXph43nva4NCiAgICByZXNldCgpIHsNCiAgICAgIHRoaXMuZm9ybSA9IHsNCiAgICAgICAgY2F0ZWdvcnlJZDogdW5kZWZpbmVkLA0KICAgICAgICBwYXJlbnRJZDogdW5kZWZpbmVkLA0KICAgICAgICBjYXRlZ29yeU5hbWU6IHVuZGVmaW5lZCwNCiAgICAgICAgb3JkZXJOdW06ICcwJywNCiAgICAgICAgc3RhdHVzOiAnMCcNCiAgICAgIH0NCiAgICAgIHRoaXMucmVzZXRGb3JtKCJmb3JtIik7DQogICAgfSwNCiAgICAvKiog5pCc57Si5oyJ6ZKu5pON5L2cICovDQogICAgaGFuZGxlUXVlcnkoKSB7DQogICAgICB0aGlzLmdldExpc3QoKTsNCiAgICB9LA0KICAgIC8qKiDph43nva7mjInpkq7mk43kvZwgKi8NCiAgICByZXNldFF1ZXJ5KCkgew0KICAgICAgdGhpcy5yZXNldEZvcm0oInF1ZXJ5Rm9ybSIpOw0KICAgICAgdGhpcy5oYW5kbGVRdWVyeSgpOw0KICAgIH0sDQogICAgLyoqIOaWsOWinuaMiemSruaTjeS9nCAqLw0KICAgIGhhbmRsZUFkZChyb3cpIHsNCiAgICAgIHRoaXMucmVzZXQoKQ0KICAgICAgaWYgKHJvdyAhPSB1bmRlZmluZWQpIHsNCiAgICAgICAgdGhpcy5mb3JtLnBhcmVudElkID0gcm93LmNhdGVnb3J5SWQNCiAgICAgIH0NCiAgICAgIHRoaXMub3BlbiA9IHRydWUNCiAgICAgIHRoaXMudGl0bGUgPSAn5re75Yqg57G755uuJw0KICAgICAgbGlzdENhdGVnb3J5KCkudGhlbihyZXMgPT4gew0KICAgICAgICB0aGlzLmNhdGVnb3J5T3B0aW9ucyA9IHRoaXMuaGFuZGxlVHJlZShyZXMuZGF0YSwgJ2NhdGVnb3J5SWQnKQ0KICAgICAgfSkNCiAgICB9LA0KICAgIC8qKiDkv67mlLnmjInpkq7mk43kvZwgKi8NCiAgICBoYW5kbGVVcGRhdGUocm93KSB7DQogICAgICB0aGlzLnJlc2V0KCkNCiAgICAgIGdldENhdGVnb3J5KHJvdy5jYXRlZ29yeUlkKS50aGVuKHJlcyA9PiB7DQogICAgICAgIHRoaXMuZm9ybSA9IHJlcy5kYXRhDQogICAgICAgIHRoaXMub3BlbiA9IHRydWUNCiAgICAgICAgdGhpcy50aXRsZSA9ICfkv67mlLnnsbvnm64nDQogICAgICB9KQ0KICAgICAgbGlzdENhdGVnb3J5RXhjbHVkZUNoaWxkKHJvdy5jYXRlZ29yeUlkKS50aGVuKHJlcyA9PiB7DQogICAgICAgIHRoaXMuY2F0ZWdvcnlPcHRpb25zID0gdGhpcy5oYW5kbGVUcmVlKHJlcy5kYXRhLCAnY2F0ZWdvcnlJZCcpDQogICAgICB9KQ0KICAgIH0sDQogICAgLyoqIOaPkOS6pOaMiemSriAqLw0KICAgIHN1Ym1pdEZvcm06IGZ1bmN0aW9uKCkgew0KICAgICAgdGhpcy4kcmVmc1siZm9ybSJdLnZhbGlkYXRlKHZhbGlkID0+IHsNCiAgICAgICAgaWYgKHZhbGlkKSB7DQogICAgICAgICAgaWYgKHRoaXMuZm9ybS5jYXRlZ29yeUlkICE9IHVuZGVmaW5lZCkgeyAvLyDkv67mlLkNCiAgICAgICAgICAgIHVwZGF0ZUNhdGVnb3J5KHRoaXMuZm9ybSkudGhlbihyZXMgPT4gew0KICAgICAgICAgICAgICBpZiAocmVzLmNvZGUgPT09IDIwMCkgew0KICAgICAgICAgICAgICAgIHRoaXMubXNnU3VjY2Vzcygn5L+u5pS55oiQ5YqfJykNCiAgICAgICAgICAgICAgICB0aGlzLm9wZW4gPSBmYWxzZQ0KICAgICAgICAgICAgICAgIHRoaXMuZ2V0TGlzdCgpDQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pDQogICAgICAgICAgfSBlbHNlIHsgLy8g5paw5aKeDQogICAgICAgICAgICBhZGRDYXRlZ29yeSh0aGlzLmZvcm0pLnRoZW4ocmVzID0+IHsNCiAgICAgICAgICAgICAgaWYgKHJlcy5jb2RlID09PSAyMDApIHsNCiAgICAgICAgICAgICAgICB0aGlzLm1zZ1N1Y2Nlc3MoJ+aWsOWinuaIkOWKnycpDQogICAgICAgICAgICAgICAgdGhpcy5vcGVuID0gZmFsc2UNCiAgICAgICAgICAgICAgICB0aGlzLmdldExpc3QoKQ0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KQ0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfSk7DQogICAgfSwNCiAgICAvKiog5Yig6Zmk5oyJ6ZKu5pON5L2cICovDQogICAgaGFuZGxlRGVsZXRlKHJvdykgew0KICAgICAgdGhpcy4kY29uZmlybSgn5piv5ZCm56Gu6K6k5Yig6Zmk5ZCN56ew5Li6IicgKyByb3cuZGVwdE5hbWUgKyAnIueahOaVsOaNrumhuT8nLCAi6K2m5ZGKIiwgew0KICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogIuehruWumiIsDQogICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICLlj5bmtogiLA0KICAgICAgICB0eXBlOiAid2FybmluZyINCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24oKSB7DQogICAgICAgIHJldHVybiBkZWxDYXRlZ29yeShyb3cuY2F0ZWdvcnlJZCkNCiAgICAgIH0pLnRoZW4oKCkgPT4gew0KICAgICAgICB0aGlzLmdldExpc3QoKQ0KICAgICAgICB0aGlzLm1zZ1N1Y2Nlc3MoJ+WIoOmZpOaIkOWKnycpDQogICAgICB9KS5jYXRjaChmdW5jdGlvbigpIHt9KQ0KICAgIH0NCiAgfQ0KfQ0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/service/category","sourcesContent":["<template>\r\n  <div class=\"app-container\">\r\n    <el-form :model=\"queryParams\" ref=\"queryForm\" :inline=\"true\" v-show=\"showSearch\">\r\n      <el-form-item label=\"类目名称\" prop=\"deptName\">\r\n        <el-input\r\n          v-model=\"queryParams.categoryName\"\r\n          placeholder=\"请输入类目名称\"\r\n          clearable\r\n          size=\"small\"\r\n          @keyup.enter.native=\"handleQuery\"\r\n        />\r\n      </el-form-item>\r\n      <el-form-item label=\"状态\" prop=\"status\">\r\n        <el-select v-model=\"queryParams.status\" placeholder=\"类目状态\" clearable size=\"small\">\r\n          <el-option\r\n            v-for=\"dict in statusOptions\"\r\n            :key=\"dict.dictValue\"\r\n            :label=\"dict.dictLabel\"\r\n            :value=\"dict.dictValue\"\r\n          />\r\n        </el-select>\r\n      </el-form-item>\r\n      <el-form-item>\r\n        <el-button type=\"cyan\" icon=\"el-icon-search\" size=\"mini\" @click=\"handleQuery\">搜索</el-button>\r\n        <el-button icon=\"el-icon-refresh\" size=\"mini\" @click=\"resetQuery\">重置</el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n\r\n    <el-row :gutter=\"10\" class=\"mb8\">\r\n      <el-col :span=\"1.5\">\r\n        <el-button\r\n          type=\"primary\"\r\n          icon=\"el-icon-plus\"\r\n          size=\"mini\"\r\n          @click=\"handleAdd\"\r\n          v-hasPermi=\"['service:category:add']\"\r\n        >新增</el-button>\r\n      </el-col>\r\n      <right-toolbar :showSearch.sync=\"showSearch\" @queryTable=\"getList\"></right-toolbar>\r\n    </el-row>\r\n\r\n    <el-table\r\n      v-loading=\"loading\"\r\n      :data=\"categoryList\"\r\n      row-key=\"categoryId\"\r\n      default-expand-all\r\n      :tree-props=\"{children: 'children', hasChildren: 'hasChildren'}\"\r\n    >\r\n      <el-table-column prop=\"categoryName\" label=\"类目名称\" width=\"260\"></el-table-column>\r\n      <el-table-column prop=\"orderNum\" label=\"排序\" width=\"200\"></el-table-column>\r\n      <el-table-column prop=\"status\" label=\"状态\" :formatter=\"statusFormat\" width=\"100\"></el-table-column>\r\n      <el-table-column label=\"创建时间\" align=\"center\" prop=\"createTime\" width=\"200\">\r\n        <template slot-scope=\"scope\">\r\n          <span>{{ parseTime(scope.row.createTime) }}</span>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"操作\" align=\"center\" class-name=\"small-padding fixed-width\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button\r\n            size=\"mini\"\r\n            type=\"text\"\r\n            icon=\"el-icon-edit\"\r\n            @click=\"handleUpdate(scope.row)\"\r\n            v-hasPermi=\"['service:category:edit']\"\r\n          >修改</el-button>\r\n          <el-button\r\n            size=\"mini\"\r\n            type=\"text\"\r\n            icon=\"el-icon-plus\"\r\n            @click=\"handleAdd(scope.row)\"\r\n            v-hasPermi=\"['service:category:add']\"\r\n          >新增</el-button>\r\n          <el-button\r\n            v-if=\"scope.row.parentId != 0\"\r\n            size=\"mini\"\r\n            type=\"text\"\r\n            icon=\"el-icon-delete\"\r\n            @click=\"handleDelete(scope.row)\"\r\n            v-hasPermi=\"['service:category:remove']\"\r\n          >删除</el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n\r\n    <!-- 添加或修改类目对话框 -->\r\n    <el-dialog :title=\"title\" :visible.sync=\"open\" width=\"600px\" append-to-body>\r\n      <el-form ref=\"form\" :model=\"form\" :rules=\"rules\" label-width=\"80px\">\r\n        <el-row>\r\n          <el-col :span=\"24\" v-if=\"form.parentId !== 0\">\r\n            <el-form-item label=\"上级类目\" prop=\"parentId\">\r\n              <treeselect v-model=\"form.parentId\" :options=\"categoryOptions\" :normalizer=\"normalizer\" placeholder=\"选择上级类目（若不选择将创建一个全新的类目）\" />\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"12\">\r\n            <el-form-item label=\"类目名称\" prop=\"categoryName\">\r\n              <el-input v-model=\"form.categoryName\" placeholder=\"请输入类目名称\" />\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"12\">\r\n            <el-form-item label=\"显示排序\" prop=\"orderNum\">\r\n              <el-input-number v-model=\"form.orderNum\" controls-position=\"right\" :min=\"0\" />\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"12\">\r\n            <el-form-item label=\"类目状态\">\r\n              <el-radio-group v-model=\"form.status\">\r\n                <el-radio\r\n                  v-for=\"dict in statusOptions\"\r\n                  :key=\"dict.dictValue\"\r\n                  :label=\"dict.dictValue\"\r\n                >{{dict.dictLabel}}</el-radio>\r\n              </el-radio-group>\r\n            </el-form-item>\r\n          </el-col>\r\n        </el-row>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button type=\"primary\" @click=\"submitForm\">确 定</el-button>\r\n        <el-button @click=\"cancel\">取 消</el-button>\r\n      </div>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n  listCategory,\r\n  addCategory,\r\n  getCategory,\r\n  listCategoryExcludeChild,\r\n  updateCategory,\r\n  delCategory\r\n} from '@/api/serivce/category'\r\nimport Treeselect from '@riophae/vue-treeselect'\r\nimport '@riophae/vue-treeselect/dist/vue-treeselect.css'\r\n\r\nexport default {\r\n  name: \"Category\",\r\n  components: { Treeselect },\r\n  data() {\r\n    return {\r\n      // 遮罩层\r\n      loading: true,\r\n      // 显示搜索条件\r\n      showSearch: true,\r\n      // 表格树数据\r\n      categoryList: [],\r\n      // 类目树选项\r\n      categoryOptions: [],\r\n      // 弹出层标题\r\n      title: \"\",\r\n      // 是否显示弹出层\r\n      open: false,\r\n      // 状态数据字典\r\n      statusOptions: [],\r\n      // 查询参数\r\n      queryParams: {\r\n        categoryName: undefined,\r\n        status: undefined\r\n      },\r\n      // 表单参数\r\n      form: {\r\n        categoryId: undefined,\r\n        parentId: undefined,\r\n        categoryName: undefined,\r\n        orderNum: '0',\r\n        status: '0'\r\n      },\r\n      // 表单校验\r\n      rules: {\r\n        categoryName: [\r\n          { required: true, message: \"类目名称不能为空\", trigger: \"blur\" }\r\n        ],\r\n        orderNum: [\r\n          { required: true, message: \"菜单顺序不能为空\", trigger: \"blur\" }\r\n        ],\r\n      }\r\n    }\r\n  },\r\n  created() {\r\n    this.getList()\r\n    this.getDicts(\"sys_normal_disable\").then(response => {\r\n      this.statusOptions = response.data\r\n    });\r\n  },\r\n  methods: {\r\n    /** 查询部门列表 */\r\n    getList() {\r\n      this.loading = true;\r\n      listCategory(this.queryParams).then(res => {\r\n        this.categoryList = this.handleTree(res.data, \"categoryId\")\r\n        this.loading = false\r\n      });\r\n    },\r\n    /** 转换部门数据结构 */\r\n    normalizer(node) {\r\n      if (node.children && !node.children.length) {\r\n        delete node.children;\r\n      }\r\n      return {\r\n        id: node.categoryId,\r\n        label: node.categoryName,\r\n        children: node.children\r\n      };\r\n    },\r\n    // 字典状态字典翻译\r\n    statusFormat(row, column) {\r\n      return this.selectDictLabel(this.statusOptions, row.status);\r\n    },\r\n    // 取消按钮\r\n    cancel() {\r\n      this.open = false;\r\n      this.reset();\r\n    },\r\n    // 表单重置\r\n    reset() {\r\n      this.form = {\r\n        categoryId: undefined,\r\n        parentId: undefined,\r\n        categoryName: undefined,\r\n        orderNum: '0',\r\n        status: '0'\r\n      }\r\n      this.resetForm(\"form\");\r\n    },\r\n    /** 搜索按钮操作 */\r\n    handleQuery() {\r\n      this.getList();\r\n    },\r\n    /** 重置按钮操作 */\r\n    resetQuery() {\r\n      this.resetForm(\"queryForm\");\r\n      this.handleQuery();\r\n    },\r\n    /** 新增按钮操作 */\r\n    handleAdd(row) {\r\n      this.reset()\r\n      if (row != undefined) {\r\n        this.form.parentId = row.categoryId\r\n      }\r\n      this.open = true\r\n      this.title = '添加类目'\r\n      listCategory().then(res => {\r\n        this.categoryOptions = this.handleTree(res.data, 'categoryId')\r\n      })\r\n    },\r\n    /** 修改按钮操作 */\r\n    handleUpdate(row) {\r\n      this.reset()\r\n      getCategory(row.categoryId).then(res => {\r\n        this.form = res.data\r\n        this.open = true\r\n        this.title = '修改类目'\r\n      })\r\n      listCategoryExcludeChild(row.categoryId).then(res => {\r\n        this.categoryOptions = this.handleTree(res.data, 'categoryId')\r\n      })\r\n    },\r\n    /** 提交按钮 */\r\n    submitForm: function() {\r\n      this.$refs[\"form\"].validate(valid => {\r\n        if (valid) {\r\n          if (this.form.categoryId != undefined) { // 修改\r\n            updateCategory(this.form).then(res => {\r\n              if (res.code === 200) {\r\n                this.msgSuccess('修改成功')\r\n                this.open = false\r\n                this.getList()\r\n              }\r\n            })\r\n          } else { // 新增\r\n            addCategory(this.form).then(res => {\r\n              if (res.code === 200) {\r\n                this.msgSuccess('新增成功')\r\n                this.open = false\r\n                this.getList()\r\n              }\r\n            })\r\n          }\r\n        }\r\n      });\r\n    },\r\n    /** 删除按钮操作 */\r\n    handleDelete(row) {\r\n      this.$confirm('是否确认删除名称为\"' + row.deptName + '\"的数据项?', \"警告\", {\r\n        confirmButtonText: \"确定\",\r\n        cancelButtonText: \"取消\",\r\n        type: \"warning\"\r\n      }).then(function() {\r\n        return delCategory(row.categoryId)\r\n      }).then(() => {\r\n        this.getList()\r\n        this.msgSuccess('删除成功')\r\n      }).catch(function() {})\r\n    }\r\n  }\r\n}\r\n</script>\r\n"]}]}